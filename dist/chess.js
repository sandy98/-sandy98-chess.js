parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"MYCW":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};exports.__esModule=!0;var n=function(){function n(t){void 0===t&&(t=n.defaultFen),this.fens=[],this.sans=[],this.tags={Event:"Internet Game",Site:"Internet",Date:n.PgnDate(),Round:"?",White:"White Player",Black:"Black Player",Result:n.results.unterminated},this.reset(t)}return n.outOfBounds=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=0;e<t.length;e++)if(t[e]<0||t[e]>63)return!0;return!1},n.capitalize=function(t){return""+t[0].toUpperCase()+t.split("").slice(1).join("").toLowerCase()},n.PgnDate=function(t){return void 0===t&&(t=new Date),t.getFullYear()+"."+(t.getMonth()+1).toString().replace(/^(\d)$/,"0$1")+"."+t.getDate().toString().replace(/^(\d)$/,"0$1")},n.row=function(t){return"string"==typeof t&&(t=n.san2sq(t)),Math.floor(t/8)},n.col=function(t){return"string"==typeof t&&(t=n.san2sq(t)),t%8},n.col2string=function(t){return t<8&&t>=0?String.fromCharCode(t+97):""},n.string2col=function(t){return t.match(/^[a-h]$/)?t.charCodeAt(0)-97:-1},n.row2string=function(t){return t<8&&t>=0?(t+1).toString(10):""},n.string2row=function(t){return t.match(/^[1-8]$/)?t.charCodeAt(0)-49:-1},n.rowcol2sq=function(t,n){return t<0||t>7||n<0||n>7?-1:8*t+n},n.isEven=function(t){return"string"==typeof t&&(t=n.san2sq(t)),t%2==0},n.isOdd=function(t){return"string"==typeof t&&(t=n.san2sq(t)),!n.isEven(t)},n.isLight=function(t){"string"==typeof t&&(t=n.san2sq(t));var e=n.isOdd(n.row(t))&&n.isEven(n.col(t)),r=n.isEven(n.row(t))&&n.isOdd(n.col(t));return e||r},n.isDark=function(t){return!n.isLight(t)},n.xor56=function(t){var n=t.split("");return n.map(function(t,e){return n[56^e]}).join("")},n.compressFenPos=function(t){return void 0===t&&(t=n.fen2obj().pos),n.xor56(t).match(/\w{8}/g).join("/").replace(/0+/g,function(t){return t.length.toString()})},n.expandFenPos=function(t){return void 0===t&&(t=n.fen2obj().fenPos),n.xor56(t.split("/").join("").replace(/\d/g,function(t){return"0".repeat(parseInt(t))}))},n.deprecatedCompressFenPos=function(t){void 0===t&&(t=n.fen2obj().pos);var e=t.split("");return e.map(function(t,n){return e[56^n]}).join("").replace(/(\w{8})(?=\S)/g,"$1/").replace(/(0+)/g,function(t){return t.length.toString()})},n.deprecatedExpandFenPos=function(t){void 0===t&&(t=n.fen2obj().fenPos);var e=t.replace(/\//g,"").replace(/\d/g,function(t){return"0".repeat(parseInt(t))}).split("");return e.map(function(t,n){return e[56^n]}).join("")},n.fen2obj=function(t){void 0===t&&(t=n.defaultFen);var e=t.split(/\s+/),r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5];return{pos:n.expandFenPos(r),fenPos:r,turn:o,castling:i,enPassant:s,halfMoveClock:parseInt(a),fullMoveNumber:parseInt(u)}},n.obj2fen=function(t){var e=t.pos,r=t.fenPos,o=t.turn,i=t.castling,s=t.enPassant,a=t.halfMoveClock,u=t.fullMoveNumber;return void 0===r&&(r=n.compressFenPos(e)),[r,o,i,s,a,u].join(" ")},n.isWhiteFigure=function(t){return-1!=="PNBRQK".indexOf(t)},n.isBlackFigure=function(t){return-1!=="pnbrqk".indexOf(t)},n.isFriend=function(t,e){return n.isWhiteFigure(t)&&n.isWhiteFigure(e)||n.isBlackFigure(t)&&n.isBlackFigure(e)},n.isFoe=function(t,e){return n.isWhiteFigure(t)&&n.isBlackFigure(e)||n.isBlackFigure(t)&&n.isWhiteFigure(e)},n.san2sq=function(t){return t.match(/^[a-h][1-8]$/)?t.charCodeAt(0)-97+8*(t.charCodeAt(1)-49):-1},n.sq2san=function(t){return t<0||t>63?"-":""+String.fromCharCode(t%8+97)+(Math.floor(t/8)+1)},n.isEqualPos=function(t,e){var r=[n.fen2obj(t),n.fen2obj(e)],o=r[0],i=r[1];return o.fenPos===i.fenPos&&o.turn===i.turn&&o.castling===i.castling&&o.enPassant===i.enPassant},n.boardArray=function(){var t=new Array(64);return t.fill(0),t.map(function(t,n){return n})},n.countFigures=function(t,e){return n.fen2obj(e).pos.split("").filter(function(n){return n===t}).length},n.figuresArray=function(t,e){var r=n.fen2obj(e).pos;return n.boardArray().filter(function(n){return r[n]===t})},n.figuresColors=function(t,e){return n.figuresArray(t,e).map(function(t){return n.isLight(t)?"light":"dark"})},n.prototype.reset=function(t){if(void 0===t&&(t=n.defaultFen),!this.validate_fen(t))throw new Error("Invalid FEN");this.fens=[t],this.sans=[{}],this.tags.Result=n.results.unterminated},n.prototype.getMaxPos=function(){return this.fens.length-1},n.prototype._getWhat=function(t,e){return void 0===t&&(t=this.getMaxPos()),void 0===e&&(e="pos"),t=t<0?0:t>=this.fens.length?this.getMaxPos():t,n.fen2obj(this.fens[t])[e]},n.prototype.getPos=function(t){return void 0===t&&(t=this.getMaxPos()),this._getWhat(t,"pos")},n.prototype.getFenPos=function(t){return void 0===t&&(t=this.getMaxPos()),this._getWhat(t,"fenPos")},n.prototype.getTurn=function(t){return void 0===t&&(t=this.getMaxPos()),this._getWhat(t,"turn")},n.prototype.getCastling=function(t){return void 0===t&&(t=this.getMaxPos()),this._getWhat(t,"castling")},n.prototype.getEnPassant=function(t){return void 0===t&&(t=this.getMaxPos()),this._getWhat(t,"enPassant")},n.prototype.getHalfMoveClock=function(t){return void 0===t&&(t=this.getMaxPos()),parseInt(this._getWhat(t,"halfMoveClock"))},n.prototype.getFullMoveNumber=function(t){return void 0===t&&(t=this.getMaxPos()),parseInt(this._getWhat(t,"fullMoveNumber"))},n.prototype.isShortCastling=function(t,n,e){return 4===t&&6===n&&"K"===e||60===t&&62===n&&"k"===e},n.prototype.isLongCastling=function(t,n,e){return 4===t&&2===n&&"K"===e||60===t&&58===n&&"k"===e},n.prototype.isEnPassant=function(t,e,r){void 0===r&&(r=this.getMaxPos());var o=this.getPos(r);return n.col(t)!==n.col(e)&&!!o[t].match(/[Pp]/)&&"0"===o[e]},n.prototype.isTwoSteps=function(t,e,r){void 0===r&&(r=this.getMaxPos());var o=this.getPos(r);return 2===Math.abs(n.row(t)-n.row(e))&&!!o[t].match(/[Pp]/)},n.prototype.isPromoting=function(t,e,r){void 0===r&&(r=this.getMaxPos());var o=this.getPos(r);return"P"==o[t]&&7===n.row(e)||"p"==o[t]&&0===n.row(e)},n.prototype.moveInfo2san=function(t){return this.isShortCastling(t.from,t.to,t.figureFrom)?"O-O":this.isLongCastling(t.from,t.to,t.figureFrom)?"O-O-O":""+(t.figureFrom.match(/[Pp]/)?t.capture?n.sq2san(t.from)[0]:"":t.figureFrom.toUpperCase())+(t.infoOrigin?t.infoOrigin:"")+(t.capture?"x":"")+n.sq2san(t.to)+(t.promotion?"="+t.promotion.toUpperCase():"")+(t.checkmate?"#":t.check?"+":"")},n.prototype.san2MoveInfo=function(t,n){return void 0===n&&(n=this.fen()),n.length?(t.length,null):null},n.prototype.canMove=function(t,e){if(void 0===e&&(e=this.getMaxPos()),e<0||e>this.getMaxPos())return!1;var r=t.figureFrom,o=t.figureTo,i=t.turn;return-1!=="pnbrqkPNBRQK".indexOf(r)&&(!n.isFriend(r,o)&&!(n.isWhiteFigure(r)&&"b"===i||n.isBlackFigure(r)&&"w"===i))},n.prototype.pgnHeaders=function(){var t=[];for(var n in this.tags)t=t.concat(["["+n+' "'+this.tags[n]+'"]']);return t.join("\n")},n.prototype.pgnMoves=function(){return this.history({verbose:!0}).map(function(t){var n=t,e="w"===n.turn?n.fullMoveNumber+". ":"",r=n.enPassant?" e.p.":"";return""+e+n.san+r}).join("  ")},n.prototype.ascii=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=this.getMaxPos());for(var e=this.getPos(n).replace(/0/g,"."),r="   +------------------------+",o=" ".repeat(r.length),i=t?"     h  g  f  e  d  c  b  a":"     a  b  c  d  e  f  g  h",s=[],a=0;a<8;a++){for(var u=t?" "+(a+1)+" |":" "+(8-a)+" |",p=0;p<8;p++)u+=" "+e[8*a+p^(t?7:56)]+" ";u+="|",s.push([u,o].join("\n"))}return[r,o].concat(s,[r,o,i]).join("\n")},n.prototype.clear=function(){this.reset(n.emptyFen)},n.prototype.fen=function(t){return void 0===t&&(t=this.getMaxPos()),this.fens[t]},n.prototype.history=function(t){return void 0===t&&(t={verbose:!1}),t.verbose?this.sans.slice(1):this.sans.slice(1).map(function(t){return t.san})},n.prototype.game_over=function(){return!1},n.prototype.get=function(t,e){return void 0===e&&(e=this.getMaxPos()),"string"==typeof t&&(t=n.san2sq(t)),this.getPos(e)[t]},n.prototype.in_check=function(t){return void 0===t&&(t=this.getMaxPos()),t<0||this.getMaxPos(),!1},n.prototype.in_checkmate=function(t){return void 0===t&&(t=this.getMaxPos()),t<0||this.getMaxPos(),!1},n.prototype.in_draw=function(t){return void 0===t&&(t=this.getMaxPos()),t<0||this.getMaxPos(),!1},n.prototype.in_stalemate=function(t){return void 0===t&&(t=this.getMaxPos()),t<0||this.getMaxPos(),!1},n.prototype.in_threefold_repetition=function(t){if(void 0===t&&(t=this.getMaxPos()),t<0||t>this.getMaxPos())return!1;for(var n=this.fens.map(function(t){return t.split(/\s+/).slice(0,4).join(" ")}),e=0;e<=t;e++)for(var r=1,o=e+1;o<=t;o++)if(n[e]===n[o]&&(r++,console.log("Position "+n[o]+" has repeated "+r+" times"),r>=3))return!0;return!1},n.prototype.header=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(n.isOdd(t.length)&&(t=t.slice(0,t.length-1)),!t.length)return this.tags;for(var r=[t.filter(function(t,e){return n.isEven(e)}).map(n.capitalize),t.filter(function(t,e){return n.isOdd(e)})],o=r[0],i=r[1],s=0;s<o.length;s++)this.tags[o[s]]=i[s];return this.tags},n.prototype.insufficient_material=function(t){return void 0===t&&(t=this.getMaxPos()),!1},n.prototype.label=function(){return this.tags.White+" - "+this.tags.Black+"\t "+this.tags.Result},n.prototype.toString=function(){return this.label()},n.prototype.load=function(t){return void 0===t&&(t=n.defaultFen),this.reset(t),!0},n.prototype.load_pgn=function(t){return t.length,!1},n.prototype.move=function(){for(var e,r,o,i,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(0===s.length)return!1;if(1===s.length){if("string"!=typeof s[0])return!1;if(!(e=this.san2MoveInfo(s[0])))return!1;r=e.from,o=e.to,i=e.promotion}else r=s[0],o=s[1],i=s[2],"string"==typeof r&&(r=n.san2sq(r)),"string"==typeof o&&(o=n.san2sq(o));var u=n.fen2obj(this.fens[this.getMaxPos()]),p=u.pos.split(""),f=u.turn,c=p[r],g=p[o],h=i||c;if((e={enPassant:!1}).turn=f,e.from=r,e.to=o,e.figureFrom=c,e.figureTo=g,e.promotion=i,e.capture="0"!==g||this.isEnPassant(r,o)&&o===n.san2sq(u.enPassant),e.san=this.moveInfo2san(e),e.fullMoveNumber=u.fullMoveNumber,e.castling=this.isShortCastling(r,o,e.figureFrom)||this.isLongCastling(r,o,e.figureFrom),!this.canMove(e))return!1;(p[r]="0",p[o]=h,"K"===c&&4===r&&6===o&&(p[7]="0",p[5]="R"),"K"===c&&4===r&&2===o&&(p[0]="0",p[3]="R"),"k"===c&&60===r&&62===o&&(p[63]="0",p[61]="r"),"k"===c&&60===r&&58===o&&(p[56]="0",p[59]="R"),this.isEnPassant(r,o))&&(o!==n.san2sq(u.enPassant)||(p[n.san2sq(u.enPassant)+8*("P"===c?-1:1)]="0",e.enPassant=!0));switch(r){case 4:u.castling=u.castling.replace(/[KQ]/g,"");break;case 60:u.castling=u.castling.replace(/[kq]/g,"");break;case 0:u.castling=u.castling.replace("Q","");break;case 7:u.castling=u.castling.replace("K","");break;case 56:u.castling=u.castling.replace("q","");break;case 63:u.castling=u.castling.replace("k","")}return u.castling=""===u.castling?"-":u.castling,this.isTwoSteps(r,o)?u.enPassant=n.sq2san("P"===c?o-8:o+8):u.enPassant="-",u.halfMoveClock=c.match(/[Pp]/)||e.capture?0:++u.halfMoveClock,u.fullMoveNumber="w"===f?u.fullMoveNumber:++u.fullMoveNumber,u=t({},u,{pos:p.join(""),fenPos:n.compressFenPos(p.join("")),turn:"w"===f?"b":"w"}),this.fens=this.fens.concat([n.obj2fen(u)]),this.sans=this.sans.concat([e]),!0},n.prototype.moves=function(t){return void 0===t&&(t=null),[]},n.prototype.pgn=function(){return[this.pgnHeaders(),this.pgnMoves()].join("\n\n")+" "+this.tags.Result},n.prototype.put=function(t,e,r){if(void 0===r&&(r=this.getMaxPos()),-1==="pnbrqk0".indexOf(t.toLowerCase()))return!1;if("string"==typeof e&&(e=n.san2sq(e)),e<0||e>63)return!1;var o=n.fen2obj(this.fens[r]),i=o.pos.split("");i[e]=t,delete o.fenPos,o.pos=i.join("");var s=n.obj2fen(o);return this.fens[r]=s,!0},n.prototype.remove=function(t,n){return void 0===n&&(n=this.getMaxPos()),this.put("0",t,n)},n.prototype.square_color=function(t){return"string"==typeof t&&(t=n.san2sq(t)),n.isDark(t)?"dark":"light"},n.prototype.turn=function(t){return void 0===t&&(t=this.getMaxPos()),this.getTurn(t)},n.prototype.undo=function(){return!(this.getMaxPos()<1)&&(this.fens.pop(),this.sans.pop(),this.tags.Result=n.results.unterminated,!0)},n.prototype.validate_fen=function(t){return!!t.length},n.results={white:"1-0",black:"0-1",draw:"1/2-1/2",unterminated:"*"},n.defaultFen="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n.emptyFen="8/8/8/8/8/8/8/8 w - - 0 1",n.sicilianFen="rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1",n.indiareyFen="r1bq1rk1/pppnn1bp/3p4/3Pp1p1/P1P1Pp2/2N2P2/1P2BBPP/R2QNRK1 b - a3 0 13",n.yugoslavFen="r1bq1rk1/pp2ppbp/2np1np1/8/3NP3/2N1BP2/PPPQ2PP/R3KB1R w KQ - 3 9",n.berlinFen="r1bk1b1r/ppp2ppp/2p5/4Pn2/8/5N2/PPP2PPP/RNB2RK1 w - - 0 9",n.sanRegExp=/(?:(^0-0-0|^O-O-O)|(^0-0|^O-O)|(?:^([a-h])(?:([1-8])|(?:x([a-h][1-8])))(?:=?([NBRQ]))?)|(?:^([NBRQK])([a-h])?([1-8])?(x)?([a-h][1-8])))(?:(\+)|(#)|(\+\+))?$/,n}();exports.Game=n;
},{}],"cFel":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};exports.__esModule=!0;var n,r=require("./game");!function(t){t[t.SCANNING=0]="SCANNING",t[t.LABEL=1]="LABEL",t[t.VALUE=2]="VALUE",t[t.TOKEN=3]="TOKEN",t[t.COMMENT=4]="COMMENT",t[t.VARIANT=5]="VARIANT"}(n=exports.PgnState||(exports.PgnState={}));var i=function(i){function a(){return null!==i&&i.apply(this,arguments)||this}return t(a,i),a.difCol=function(t,e){return Math.abs(r.Game.col(t)-r.Game.col(e))},a.difRow=function(t,e){return Math.abs(r.Game.row(t)-r.Game.row(e))},a.isSameCol=function(t,e){return 0===a.difCol(t,e)},a.isSameRow=function(t,e){return 0===a.difRow(t,e)},a.isDiagonal=function(t,e){return a.difRow(t,e)===a.difCol(t,e)},a.isAntiDiagonal=function(t,e){return a.isDiagonal(t,e)&&Math.abs(t-e)%7==0&&63!==t&&63!==e},a.isAdjacent=function(t,e){return a.difCol(t,e)<2&&a.difRow(t,e)<2},a.isKingAttack=function(t,e){return t!==e&&a.isAdjacent(t,e)},a.isWKingCastling=function(t,e){return 4===t&&(6===e||2===e)},a.isBKingCastling=function(t,e){return 60===t&&(62===e||58===e)},a.isWPawnAttack=function(t,e){return a.row(e)===a.row(t)+1&&1===a.difCol(t,e)},a.isBPawnAttack=function(t,e){return a.row(e)===a.row(t)-1&&1===a.difCol(t,e)},a.isWPawnMove=function(t,e){var n=r.Game.row(t);return 1===n?(a.row(e)===n+1||a.row(e)===n+2)&&a.isSameCol(t,e):a.row(e)===n+1&&a.isSameCol(t,e)},a.isBPawnMove=function(t,e){var n=r.Game.row(t);return 6===n?(a.row(e)===n-1||a.row(e)===n-2)&&a.isSameCol(t,e):a.row(e)===n-1&&a.isSameCol(t,e)},a.isKnightAttack=function(t,e){return 2===a.difRow(t,e)&&1===a.difCol(t,e)||1===a.difRow(t,e)&&2===a.difCol(t,e)},a.isBishopAttack=function(t,e){return t!==e&&a.isDiagonal(t,e)},a.isRookAttack=function(t,e){return t!==e&&(a.isSameRow(t,e)||a.isSameCol(t,e))},a.isQueenAttack=function(t,e){return a.isRookAttack(t,e)||a.isBishopAttack(t,e)},a.path=function(t,e){if(!a.isQueenAttack(t,e)&&!a.isKnightAttack(t,e))return[];if(a.isKnightAttack(t,e))return[t,e];for(var n=[],r=t<=e?t:e,i=e>=t?e:t,o=a.isAntiDiagonal(r,i)?7:a.isDiagonal(r,i)?9:a.isSameCol(r,i)?8:1,s=r;s<=i;s+=o)n=n.concat([s]);return n},a.innerPath=function(t,e){var n=a.path(t,e);return n.slice(1,n.length-1)},a.isClearPath=function(t,e,n){var i=a.innerPath(t,e);if(0===i.length)return!0;for(var o=r.Game.fen2obj(n),s=0;s<i.length;s++)if("0"!==o.pos[i[s]])return!1;return!0},a.inScope=function(t,e,n,i){switch(void 0===i&&(i=!1),r.Game.fen2obj(n).pos[t]){case"p":return i?a.isBPawnAttack(t,e):a.isBPawnAttack(t,e)||a.isBPawnMove(t,e);case"P":return i?a.isWPawnAttack(t,e):a.isWPawnAttack(t,e)||a.isWPawnMove(t,e);case"n":case"N":return a.isKnightAttack(t,e);case"b":case"B":return a.isBishopAttack(t,e);case"r":case"R":return a.isRookAttack(t,e);case"q":case"Q":return a.isQueenAttack(t,e);case"k":return i?a.isKingAttack(t,e):a.isKingAttack(t,e)||a.isBKingCastling(t,e);case"K":return i?a.isKingAttack(t,e):a.isKingAttack(t,e)||a.isWKingCastling(t,e);default:return!1}},a.army=function(t,e){var n="b"===t?"pnbrqk":"PNBRQK",i=r.Game.fen2obj(e).pos;return i.split("").map(function(t,e){return e}).filter(function(t){return n.includes(i[t])})},a.attacksOnSquare=function(t,e,n){r.Game.fen2obj(e).pos;return a.army(t,e).filter(function(t){return a.canAttack(t,n,e)})},a.canReach=function(t,e,n){return a.inScope(t,e,n)&&a.isClearPath(t,e,n)},a.canAttack=function(t,e,n){return a.inScope(t,e,n,!0)&&a.isClearPath(t,e,n)},a.kingSquare=function(t,e){for(var n="w"===t?"K":"k",i=r.Game.fen2obj(e),a=0;a<64;a++)if(i.pos[a]===n)return a;return-1},a.checks=function(t,e){var n="w"===t?"b":"w",r=a.kingSquare(t,e);return a.attacksOnSquare(n,e,r).length},a.sideCanWin=function(t,e){if(!"wb".includes(t)||1!==t.length)return!1;r.Game.fen2obj(e).pos.split("");var n="b"===t?["p","n","b","r","q"]:["P","N","B","R","Q"],i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],f="w"===t?["p","n","b","r","q"]:["P","N","B","R","Q"],c=f[0],l=f[1],m=f[2],h=f[3],g=f[4],p=[r.Game.countFigures(i,e),r.Game.countFigures(a,e),r.Game.countFigures(o,e),r.Game.countFigures(s,e),r.Game.countFigures(u,e)],v=p[0],w=p[1],k=p[2],G=p[3],b=p[4],d=[r.Game.countFigures(c,e),r.Game.countFigures(l,e),r.Game.countFigures(m,e),r.Game.countFigures(h,e),r.Game.countFigures(g,e)],P=d[0],A=d[1],C=d[2],M=d[3],O=d[4];if(v||G||b)return!0;if(w&&k)return!0;switch(w){case 0:if(!k)return!1;break;case 1:return!!(P||A||C||M);case 2:return!!(P||A||C||M||O);default:return!0}switch(k){case 0:return!1;case 1:if(P||A)return!0;if(C){for(var q=r.Game.figuresColors(o,e),N=r.Game.figuresColors(m,e),_=0;_<N.length;_++)if(q[0]!==N[_])return!0;return!1}return!1;default:var y=r.Game.figuresColors(o,e);for(_=1;_<y.length;_++)if(y[0]!==y[_])return!0;if(P||A)return!0;if(C){for(N=r.Game.figuresColors(m,e),_=0;_<N.length;_++)if(y[0]!==N[_])return!0;return!1}return!1}return!1},a.lex_pgnfile=function(t){var e=(t=t.replace(/\r/g,"\n")).split(/\n{2,}/);if(r.Game.isOdd(e.length)&&(e=e.slice(0,e.length-1)),!e.length)return[""];for(var n=[],i=0;i<e.length;i+=2)n=n.concat([[e[i],e[i+1]].join("\n\n")]);return n},a.parse_pgnfile=function(t){var e=a.lex_pgnfile(t);if(!e.length)return[];for(var n=[],r=0;r<e.length;r++){var i=new a;i.load_pgn(e[r])&&(n=n.concat([i]))}return n},a.prototype.san2MoveInfo=function(t,e){var n=this;if(void 0===e&&(e=this.fen()),!t.length)return null;var i=t.match(r.Game.sanRegExp);if(!i)return null;i[0];var o=i[1],s=i[2],u=i[3],f=i[4],c=i[5],l=i[6],m=i[7],h=i[8],g=i[9],p=(i[10],i[11]),v=(i[12],i[13],i[14],r.Game.fen2obj(e)),w={};if(w.turn=v.turn,w.fullMoveNumber=v.fullMoveNumber,o)return w.figureFrom="b"===w.turn?"k":"K",w.figureTo="0",w.from="b"===w.turn?60:4,w.to="b"===w.turn?58:2,w.san="O-O-O",w.castling=!0,w;if(s)return w.figureFrom="b"===w.turn?"k":"K",w.figureTo="0",w.from="b"===w.turn?60:4,w.to="b"===w.turn?62:6,w.san="O-O",w.castling=!0,w;if(u){w.figureFrom="b"===w.turn?"p":"P";var k,G=r.Game.string2col(u),b=void 0,d=void 0;if(f){if(w.figureTo="0",d=r.Game.string2row(f),b=G,k="b"===w.turn?d+1:d-1,w.from=r.Game.rowcol2sq(k,G),v.pos[w.from].match(/[Pp]/)||(w.from+="b"===w.turn?8:-8),!v.pos[w.from].match(/[Pp]/))return null;w.to=r.Game.rowcol2sq(d,b)}else c&&(w.capture=!0,w.to=r.Game.san2sq(c),w.figureTo=v.pos[w.to],k=r.Game.row(w.to)+("w"===w.turn?-1:1),w.from=r.Game.rowcol2sq(k,G));return l&&(w.promotion="b"===w.turn?l.toLowerCase():l.toUpperCase()),w}if(m){var P="w"===w.turn?m.toUpperCase():m.toLowerCase();w.figureFrom=P,w.from=-1,w.to=r.Game.san2sq(p),w.figureTo=v.pos[w.to],w.capture="0"!==w.figureTo;var A=r.Game.boardArray().filter(function(t){return v.pos[t]===P}).filter(function(t){return a.canReach(t,w.to,e)}).filter(function(t){var e=n.tryMove(t,w.to);return e&&n.validate_fen(e.fen)});switch(A.length){case 0:return null;case 1:w.from=A[0];break;default:if(h&&g){for(var C=r.Game.san2sq(""+h+g),M=0;M<A.length;M++)if(A[M]===C){w.from=C;break}}else if(h){var O=r.Game.string2col(h);for(M=0;M<A.length;M++)if(r.Game.col(A[M])===O){w.from=A[M];break}}else{if(!g)return null;var q=r.Game.string2row(g);for(M=0;M<A.length;M++)if(r.Game.row(A[M])===q){w.from=A[M];break}}}return-1!==w.from?w:null}return null},a.prototype.canMove=function(t,e){if(void 0===e&&(e=this.getMaxPos()),!i.prototype.canMove.call(this,t,e))return!1;if(!a.canReach(t.from,t.to,this.fens[e]))return!1;if("K"===t.figureFrom&&4===t.from&&6===t.to){if(!this.getCastling(e).includes("K"))return!1;if("0"!==t.figureTo)return!1;if(a.attacksOnSquare("b",this.fens[e],4).length)return!1;if(a.attacksOnSquare("b",this.fens[e],5).length)return!1}if("K"===t.figureFrom&&4===t.from&&2===t.to){if(!this.getCastling(e).includes("Q"))return!1;if("0"!==t.figureTo)return!1;if(a.attacksOnSquare("b",this.fens[e],4).length)return!1;if(a.attacksOnSquare("b",this.fens[e],3).length)return!1}if("k"===t.figureFrom&&60===t.from&&62===t.to){if(!this.getCastling(e).includes("k"))return!1;if("0"!==t.figureTo)return!1;if(a.attacksOnSquare("w",this.fens[e],60).length)return!1;if(a.attacksOnSquare("w",this.fens[e],61).length)return!1}if("k"===t.figureFrom&&60===t.from&&58===t.to){if(!this.getCastling(e).includes("q"))return!1;if("0"!==t.figureTo)return!1;if(a.attacksOnSquare("w",this.fens[e],60).length)return!1;if(a.attacksOnSquare("w",this.fens[e],59).length)return!1}var n=t.to===r.Game.san2sq(this.getEnPassant(e))||r.Game.isFoe(t.figureFrom,t.figureTo);if("P"===t.figureFrom){if(a.isWPawnMove(t.from,t.to)&&"0"!==t.figureTo)return!1;if(a.isWPawnAttack(t.from,t.to)&&!n)return!1}if("p"===t.figureFrom){if(a.isBPawnMove(t.from,t.to)&&"0"!==t.figureTo)return!1;if(a.isBPawnAttack(t.from,t.to)&&!n)return!1}return!0},a.prototype.tryMove=function(t,n,i){var a;if(void 0===i&&(i=null),"string"==typeof t&&(t=r.Game.san2sq(t)),"string"==typeof n&&(n=r.Game.san2sq(n)),r.Game.outOfBounds(t,n))return null;var o=r.Game.fen2obj(this.fens[this.getMaxPos()]),s=o.pos.split(""),u=o.turn,f=s[t],c=s[n],l=i||f;if((a={enPassant:!1}).turn=u,a.from=t,a.to=n,a.figureFrom=f,a.figureTo=c,a.promotion=i,a.capture="0"!==c||this.isEnPassant(t,n)&&n===r.Game.san2sq(o.enPassant),a.san=this.moveInfo2san(a),a.fullMoveNumber=o.fullMoveNumber,a.castling=this.isShortCastling(t,n,a.figureFrom)||this.isLongCastling(t,n,a.figureFrom),!this.canMove(a))return null;(s[t]="0",s[n]=l,"K"===f&&4===t&&6===n&&(s[7]="0",s[5]="R",a.san="O-O"),"K"===f&&4===t&&2===n&&(s[0]="0",s[3]="R",a.san="O-O-O"),"k"===f&&60===t&&62===n&&(s[63]="0",s[61]="r",a.san="O-O"),"k"===f&&60===t&&58===n&&(s[56]="0",s[59]="R",a.san="O-O-O"),this.isEnPassant(t,n))&&(n!==r.Game.san2sq(o.enPassant)||(s[r.Game.san2sq(o.enPassant)+8*("P"===f?-1:1)]="0",a.enPassant=!0));switch(t){case 4:o.castling=o.castling.replace(/[KQ]/g,"");break;case 60:o.castling=o.castling.replace(/[kq]/g,"");break;case 0:o.castling=o.castling.replace("Q","");break;case 7:o.castling=o.castling.replace("K","");break;case 56:o.castling=o.castling.replace("q","");break;case 63:o.castling=o.castling.replace("k","")}return o.castling=""===o.castling?"-":o.castling,this.isTwoSteps(t,n)?o.enPassant=r.Game.sq2san("P"===f?n-8:n+8):o.enPassant="-",o.halfMoveClock=f.match(/[Pp]/)||a.capture?0:++o.halfMoveClock,o.fullMoveNumber="w"===u?o.fullMoveNumber:++o.fullMoveNumber,o=e({},o,{pos:s.join(""),fenPos:r.Game.compressFenPos(s.join("")),turn:"w"===u?"b":"w"}),{fen:r.Game.obj2fen(o),moveInfo:a}},a.prototype.game_over=function(){return this.in_checkmate()||this.in_stalemate()||this.in_draw()||this.in_threefold_repetition()||this.insufficient_material()},a.prototype.in_check=function(t){return void 0===t&&(t=this.getMaxPos()),!(t<0||t>this.getMaxPos())&&a.checks(this.getTurn(t),this.fen(t))>0},a.prototype.in_checkmate=function(t){return void 0===t&&(t=this.getMaxPos()),!(t<0||t>this.getMaxPos())&&(this.in_check(t)&&0===this.moves(null,t).length)},a.prototype.in_draw=function(t){return void 0===t&&(t=this.getMaxPos()),this.insufficient_material(t)||r.Game.fen2obj(this.fen(t)).halfMoveClock>=100},a.prototype.in_stalemate=function(t){return void 0===t&&(t=this.getMaxPos()),!this.in_check(t)&&0===this.moves(null,t).length},a.prototype.insufficient_material=function(t){return void 0===t&&(t=this.getMaxPos()),!a.sideCanWin("w",this.fen(t))&&!a.sideCanWin("b",this.fen(t))},a.prototype.load_pgn=function(t){var e="",i="",o="",s="",u=0,f=n.SCANNING,c=n.SCANNING,l=new a,m=function(t){return!!t.match(r.Game.sanRegExp)},h=function(t){for(var e in r.Game.results)if(t===r.Game.results[e])return!0;return!1};do{switch(e=t[u++],f){case n.SCANNING:if("["===e){f=n.LABEL;continue}if("{"===e){c=f,f=n.COMMENT;continue}if("("===e){c=f,f=n.VARIANT;continue}if(e.match(/[\s\]]/))continue;f=n.TOKEN,i=e;continue;case 1:'"'===e?f=n.VALUE:o+=e;continue;case 2:'"'===e?(f=n.SCANNING,l.header(o.trim(),s),o="",s=""):s+=e;continue;case 3:if("{"==e)c=f,f=n.COMMENT;else if("("==e)c=f,f=n.VARIANT;else if(e.match(/[\s\[]/)){if(h(i)&&l.header("Result",i),h(i)||"["===e)return this.fens=l.fens,this.sans=l.sans,this.tags=l.tags,!0;var g=i.replace(/\d+\.\s*(\.\.\.)?\s*/g,"");if(m(g))if(!l.move(g))return!1;i=""}else i+=e;continue;case n.COMMENT:"}"==e&&(f=c);continue;case n.VARIANT:")"==e&&(f=c);continue;default:continue}}while(u<t.length);return this.fens=l.fens,this.sans=l.sans,this.tags=l.tags,!0},a.prototype.getInfoOrigin=function(t,e){var n=this;if(void 0===e&&(e=this.fen()),t.figureFrom.match(/[Pp]/))return"";var i=r.Game.fen2obj(e).pos.split(""),o=i.map(function(t,e){return e}).filter(function(e){return e!=t.from&&i[e]===t.figureFrom});if(!o.length)return"";var s=o.filter(function(n){return a.canReach(n,t.to,e)});if(!s.length)return"";var u=s.filter(function(e){var r=n.tryMove(e,t.to,t.promotion);return!!r&&n.validate_fen(r.fen)});switch(u.length){case 0:return"";case 1:return a.isSameCol(t.from,u[0])?r.Game.row2string(r.Game.row(t.from)):r.Game.col2string(r.Game.col(t.from));default:return r.Game.sq2san(t.from)}},a.prototype.move=function(){for(var t,n,i,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];switch(a.length){case 0:return!1;case 1:var s=this.san2MoveInfo(a[0],this.fen());if(!s)return!1;t=s.from,n=s.to,i=s.promotion;break;default:t=a[0],n=a[1],i=a[2]}if("string"==typeof t&&(t=r.Game.san2sq(t)),"string"==typeof n&&(n=r.Game.san2sq(n)),r.Game.outOfBounds(t,n))return!1;var u=this.tryMove(t,n,i);if(null===u)return!1;if(!this.validate_fen(u.fen))return!1;var f=this.getInfoOrigin(u.moveInfo);return u.moveInfo=e({},u.moveInfo,{infoOrigin:f}),this.fens=this.fens.concat([u.fen]),this.in_checkmate()?(u.moveInfo=e({},u.moveInfo,{checkmate:!0}),this.tags.Result="w"===u.moveInfo.turn?r.Game.results.white:r.Game.results.black):this.in_check()?u.moveInfo=e({},u.moveInfo,{check:!0}):this.in_stalemate()&&(u.moveInfo=e({},u.moveInfo,{stalemate:!0}),this.tags.Result=r.Game.results.draw),u.moveInfo=e({},u.moveInfo,{san:this.moveInfo2san(u.moveInfo)}),this.sans=this.sans.concat([u.moveInfo]),!0},a.prototype.moves=function(t,n){void 0===t&&(t=null),void 0===n&&(n=this.getMaxPos());for(var i=[],a="b"===this.getTurn(n)?"pnbrqk":"PNBRQK",o=this.fens[n],s=r.Game.fen2obj(o).pos,u=0;u<64;u++)if(a.includes(s[u]))for(var f=function(t){var n="P"===s[u]&&7===r.Game.row(t)?"Q":"p"===s[u]&&0===r.Game.row(t)?"q":null,a=c.tryMove(u,t,n);a&&c.validate_fen(a.fen)&&(i=i.concat([a.moveInfo]),n&&("Q"===n?["N","R","B"]:["n","r","b"]).forEach(function(t){i=i.concat([e({},a.moveInfo,{promotion:t,san:a.moveInfo.san.replace(n,t)})])}))},c=this,l=0;l<64;l++)f(l);if(t&&t.square){var m="string"==typeof t.square?r.Game.san2sq(t.square):t.square;i=i.filter(function(t){return t.from===m})}return t&&t.verbose?i:i.map(function(t){return t.san})},a.prototype.validate_fen=function(t){if(!t.length)return!1;var e=r.Game.fen2obj(t),n=e.pos.split(""),i=0,o=0,s=0,u=0,f=0;if(64!==n.length)return!1;if(!e.turn.match(/[wb]/))return!1;if(!e.castling.match(/([KQkq]+)|(-)/))return!1;if(!e.enPassant.match(/([a-h](3|6))|(-)/))return!1;for(var c=0;c<64;c++)switch(n[c]){case"K":i++;break;case"k":o++;break;case"P":s++;break;case"p":u++;break;default:"NBRQnbrq0".includes(n[c])||f++}if(s>8||u>8||1!==i||1!==o||f>0)return!1;var l=e.turn,m=a.checks("w",t),h=a.checks("b",t);return!("w"===l&&h>0||"b"===l&&m>0)},a}(r.Game);exports.Chess=i,"undefined"!=typeof window&&(window.Chess=i);
},{"./game":"MYCW"}]},{},["cFel"], null)
//# sourceMappingURL=/chess.map